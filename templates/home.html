<!DOCTYPE html>
<html lang="en">
<head>
    <title>RESQALERT AI Core</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

    <style>
        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            min-height:100vh;
            background: radial-gradient(circle at top, #0f172a, #020617 70%);
            font-family:'Inter', sans-serif;
            color:#e2e8f0;
            display:flex;
            justify-content:center;
            align-items:center;
            overflow:hidden;
        }

        .panel {
            width:900px;
            max-width:95%;
            padding:50px;
            border-radius:24px;
            background:rgba(15,23,42,0.85);
            backdrop-filter:blur(30px);
            border:1px solid rgba(0,255,255,0.15);
            box-shadow:0 0 60px rgba(0,255,255,0.08),
                       0 40px 100px rgba(0,0,0,0.7);
            text-align:center;
        }

        h1 {
            font-family:'Orbitron', sans-serif;
            font-size:36px;
            margin-bottom:20px;
            text-shadow:0 0 15px rgba(0,255,255,0.7);
        }

        .orb {
            width:160px;
            height:160px;
            border-radius:50%;
            margin:30px auto;
            background: radial-gradient(circle, #00ffff 0%, #0ea5e9 40%, transparent 70%);
            box-shadow:0 0 40px #00ffff,
                       0 0 80px #0ea5e9;
            animation: rotate 18s linear infinite;
            transition:0.3s ease;
        }

        .speaking {
            transform:scale(1.15);
            box-shadow:0 0 80px #00ffff,
                       0 0 160px #0ea5e9;
        }

        @keyframes rotate {
            from { transform:rotate(0deg); }
            to { transform:rotate(360deg); }
        }

        canvas {
            width:100%;
            height:120px;
            margin-top:20px;
        }

        .info-box {
            margin-top:20px;
            font-family:monospace;
            font-size:13px;
            color:#38bdf8;
            background:rgba(0,0,0,0.45);
            padding:20px;
            border-radius:14px;
            text-align:left;
        }

        footer {
            margin-top:40px;
            font-size:12px;
            color:#475569;
        }
    </style>
</head>
<body>

<div class="panel">

    <h1>RESQALERT AI CORE</h1>

    <div class="orb" id="orb"></div>

    <!-- REAL AUDIO WAVEFORM -->
    <canvas id="wave"></canvas>

    <div class="info-box">
        <strong>Visitor Metadata</strong><br>
        IP Address: {{ ip }}<br>
        User Agent: {{ user_agent }}<br>
        Referrer: {{ referrer }}<br>
        Server Time: {{ time }}
    </div>

    <footer>
        © 2026 Soltryx Solutions • AI Monitoring Active
    </footer>

</div>

<script>
const orb = document.getElementById("orb");
const canvas = document.getElementById("wave");
const ctx = canvas.getContext("2d");

canvas.width = canvas.offsetWidth;
canvas.height = canvas.offsetHeight;

let audioContext;
let analyser;
let dataArray;

function initAudio() {
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
    analyser = audioContext.createAnalyser();
    analyser.fftSize = 256;
    const bufferLength = analyser.frequencyBinCount;
    dataArray = new Uint8Array(bufferLength);

    draw();
}

function draw() {
    requestAnimationFrame(draw);

    analyser.getByteFrequencyData(dataArray);

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const barWidth = canvas.width / dataArray.length;

    for (let i = 0; i < dataArray.length; i++) {
        const barHeight = dataArray[i] / 2;

        ctx.fillStyle = `rgb(0, ${150 + barHeight}, 255)`;
        ctx.fillRect(i * barWidth, canvas.height - barHeight, barWidth - 1, barHeight);
    }
}

function speak(text) {
    if (!audioContext) initAudio();

    const utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = 0.9;
    utterance.pitch = 0.85;

    const source = audioContext.createMediaStreamDestination();
    const synth = window.speechSynthesis;

    orb.classList.add("speaking");

    utterance.onend = () => {
        orb.classList.remove("speaking");
    };

    synth.speak(utterance);
}

function getGreeting() {
    const hour = new Date().getHours();
    if (hour < 12) return "Good morning";
    if (hour < 18) return "Good afternoon";
    return "Good evening";
}

window.onload = () => {
    setTimeout(() => {
        speak(`${getGreeting()}. Welcome to ResQAlert Backend. 
        Security systems are fully operational. Monitoring is active.`);
    }, 1500);
};
</script>

</body>
</html>